var fs = require('fs');
var path = require('path');

function updateAutocompleteList(){
  fs.readdir(path.join(appRoot,'public/data/versions'),function(err,files){
    for (var index in files){
      var fname = files[index];
      var data = fs.readFileSync(path.join(appRoot,'public/data/versions', fname));
      var obj = JSON.parse(data);
      var products = [];
      for(var k in obj) {
        products = (products.concat(obj[k]["Supported"]).concat(obj[k]["Certified"]));
      }
      var data = fs.readFileSync(path.join(appRoot,'public/data/products.json'));
      prods = JSON.parse(data);
      for (var i in products){
            prods[products[i]]="";
          };
      fs.writeFileSync(path.join(appRoot,'public/data/products.json'),JSON.stringify(prods,null,4));
      }
  });
}


module.exports.updateAutocompleteList = updateAutocompleteList;